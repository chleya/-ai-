# 消息复杂度分析

## 理论推导

### 符号定义

| 符号 | 含义 |
|------|------|
| N | 总节点数 |
| M | 模块数 |
| K | 每个模块的节点数（K = N/M） |
| T | 演化步数 |

### 全连接（基线）

**每个节点的通信**：
- 需要与所有N-1个节点通信
- 消息复杂度：$O(N)$

**每次同步**：
- 总消息数：$N \times (N-1) \approx O(N^2)$

**总复杂度（演化T步）**：
$$\text{Complex}_{FC} = O(T \times N^2)$$

### 稀疏块状耦合

**模块内通信**：
- 每个节点与K-1个同模块节点通信
- 每次模块内同步：$O(K^2)$

**模块间通信**：
- 仅模块代表节点参与
- M个模块代表通信：$O(M)$

**总复杂度（每步）**：
$$\text{PerStep} = M \times O(K^2) + O(M) = O(M \times (\frac{N}{M})^2) = O(\frac{N^2}{M})$$

**总复杂度（T步）**：
$$\text{Complex}_{SB} = O(T \times \frac{N^2}{M})$$

### 复杂度对比

| 算法 | 单步复杂度 | T步总复杂度 | N=1000时 |
|------|------------|-------------|----------|
| 全连接 | $O(N^2)$ | $O(TN^2)$ | 10⁶ |
| 稀疏块状(M=30) | $O(N^2/30)$ | $O(TN^2/30)$ | 3.3×10⁴ |
| **节省比例** | **30倍** | **30倍** | - |

### 通信节省

$$\text{SavingRatio} = \frac{\text{Complex}_{FC}}{\text{Complex}_{SB}} = M$$

当M=30时，**节省30倍**通信开销。

### 边缘场景优势

| 特性 | 全连接 | 稀疏块状 | 优势 |
|------|---------|----------|------|
| 带宽需求 | 高 | 低 | ✅ |
| 延迟敏感度 | 高 | 低 | ✅ |
| 断连容错 | 低 | 高 | ✅ |
| 扩展性 | 差 | 好 | ✅ |

### 与经典算法对比

| 算法 | 消息复杂度 | 容错 | 边缘适用性 |
|------|-------------|------|------------|
| PBFT | $O(N^2)$ | 33% Byzantine | ❌ |
| Raft | $O(N)$ | Crash | ⚠️ |
| Gossip | $O(N\log N)$ | Crash | ✅ |
| **本文方法** | **$O(N^2/M)$** | **Crash** | **✅** |

当M=30时：
$$\text{Complex}_{Ours} = O(N^2/30) = O(N \times \frac{N}{30}) \approx O(N \times 33)$$

这意味着每个节点平均只需要与33个邻居通信，而非全部1000个。

### 结论

**稀疏块状耦合的核心优势**：

1. **通信节省**：M=30时节省30倍
2. **带宽友好**：单节点仅需连接K≈33个邻居
3. **天然容错**：断连仅影响局部，不波全局
4. **线性扩展**：复杂度随M增加而下降

$$\text{边缘友好度} \propto \frac{1}{\text{消息复杂度}} \propto M$$

---

**推导日期**: 2026-02-07
