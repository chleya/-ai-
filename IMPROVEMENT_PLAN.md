# Cicada Protocol - æ”¹è¿›è®¡åˆ’

## å½“å‰é—®é¢˜æ€»ç»“

| é—®é¢˜ | ä¸¥é‡ç¨‹åº¦ | ç°çŠ¶ | ç›®æ ‡ |
|------|----------|------|------|
| Î»_maxåä½ | ğŸ”´ é«˜ | 1.4 | 2.0+ |
| ç›¸å˜è¯æ®ä¸è¶³ | ğŸ”´ é«˜ | æ— æ•°æ® | N=100~2000æ‰«æ |
| äº‹ä»¶è§¦å‘ç¼ºå¤± | ğŸŸ¡ ä¸­ | åªæœ‰å›ºå®šå‘¨æœŸ | Î±=1.6å®ç° |
| ä»»åŠ¡åˆ‡æ¢ç¼ºå¤± | ğŸŸ¡ ä¸­ | æ—  | +11.9%å¯¹æ¯” |
| å‚æ•°ä¸é€æ˜ | ğŸŸ¡ ä¸­ | æœªæ–‡æ¡£åŒ– | å®Œæ•´å‚æ•°è¡¨ |

---

## 1. å‚æ•°ç»Ÿä¸€é—®é¢˜

### å½“å‰demoå‚æ•°ï¼ˆcore.pyï¼‰
```python
learning_rate: 0.001  # Î·
noise_level: 0.5
N: 200
steps: 800
```

### é—®é¢˜
- Î·=0.001 å¤ªå° â†’ Î»_max åªæœ‰ ~1.4
- READMEå£°ç§° 2.15 â†’ 1.73ï¼Œä½†demoè¾¾ä¸åˆ°

### éœ€è¦æ˜ç¡®
1. ä»€ä¹ˆæ¡ä»¶ä¸‹Î»_maxä¼šè¾¾åˆ°2.0+ï¼Ÿ
2. Nã€Î·ã€è¾“å…¥åˆ†å¸ƒã€æ­£åˆ™åŒ–ç­‰å‚æ•°çš„å…·ä½“å€¼

---

## 2. å®éªŒæ”¹è¿›è®¡åˆ’

### Phase 1: åŸºå‡†å®éªŒï¼ˆå½“å‰æœ€ç¼ºï¼‰

#### 2.1 Î»_max vs Î· æ‰«æ
```python
for eta in [0.001, 0.01, 0.05, 0.1]:
    for N in [50, 100, 200, 500, 1000]:
        run_experiment(eta=eta, N=N, trials=10)
```

#### 2.2 ç›¸å˜æ‰«æ (N_c â‰ˆ 900)
```python
N_values = [100, 200, 400, 600, 800, 900, 1000, 1200, 1500, 2000]
survival_rates = []
for N in N_values:
    rate = run_experiment(N=N, trials=20)
    survival_rates.append(rate)
```

#### 2.3 å›ºå®šå‚æ•°é›†ï¼ˆå¿…é¡»ç»Ÿä¸€ï¼ï¼‰
```python
# æ¨èçš„åŸºå‡†å‚æ•°
CONFIG = {
    'N': 200,                    # ç³»ç»Ÿè§„æ¨¡
    'eta': 0.01,                 # å­¦ä¹ ç‡ï¼ˆéœ€è¦éªŒè¯ï¼‰
    'input_distribution': 'gaussian',  # s(t) ~ N(0,1)
    'normalization': 'spectral',  # è°±å½’ä¸€åŒ–
    'weight_clip': 10.0,          # æƒé‡è£å‰ªé˜ˆå€¼
    'steps': 2000,               # æ¼”åŒ–æ­¥æ•°
    'trials': 20,                # é‡å¤æ¬¡æ•°
}
```

---

## 3. äº‹ä»¶è§¦å‘æœºåˆ¶å®ç°

### å½“å‰ç¼ºå¤±
- READMEæåˆ°Î±=1.6ï¼Œä½†æ²¡æœ‰ä»£ç å®ç°
- æ²¡æœ‰threshold-basedè§¦å‘é€»è¾‘

### éœ€è¦å®ç°
```python
class EventTriggeredStrategy:
    """äº‹ä»¶è§¦å‘é‡ç½®ç­–ç•¥"""
    
    def __init__(self, alpha: float = 1.6, window: int = 20):
        self.alpha = alpha
        self.window = window
    
    def should_reset(self, lambda_history: List[float]) -> bool:
        """
        å½“ Î»_max(t) > Î± Ã— mean(Î»_max recent) æ—¶è§¦å‘
        """
        if len(lambda_history) < self.window:
            return False
        
        current = lambda_history[-1]
        mean_recent = np.mean(lambda_history[-self.window:])
        
        return current > self.alpha * mean_recent
```

---

## 4. ä»»åŠ¡åˆ‡æ¢å®éªŒ

### å½“å‰ç¼ºå¤±
- æ²¡æœ‰å¤šä»»åŠ¡å®éªŒ
- æ²¡æœ‰"å³°å€¼ç»§æ‰¿"vs"éšæœºé‡ç½®"å¯¹æ¯”

### éœ€è¦å®ç°
```python
class TaskSwitchingExperiment:
    """ä»»åŠ¡åˆ‡æ¢å®éªŒ"""
    
    def __init__(self, task_a_config, task_b_config):
        self.task_a = task_a_config
        self.task_b = task_b_config
    
    def run(self, strategy: str = 'reset'):
        """
        æ¯”è¾ƒ:
        - éšæœºé‡ç½® (reset): æ¯ä¸ªä»»åŠ¡ç”¨æ–°çš„éšæœºåˆå§‹åŒ–
        - å³°å€¼ç»§æ‰¿ (inherit): ä¿ç•™ä¸Šä¸ªä»»åŠ¡çš„æƒé‡
        """
        # å®ç°å¯¹æ¯”å®éªŒ
        pass
```

---

## 5. ç†è®ºæ”¹è¿›

### å½“å‰é—®é¢˜
- Isotropy Theory ç¼ºä¹æ¨å¯¼
- æ²¡æœ‰å¼•ç”¨ç›¸å…³æ–‡çŒ®

### éœ€è¦æ·»åŠ 
1. å®Œæ•´çš„æ•°å­¦æ¨å¯¼ï¼ˆé™„å½•ï¼‰
2. ç›¸å…³å·¥ä½œå¼•ç”¨ï¼š
   - Amari (1977) - ç¥ç»ç½‘ç»œçš„è‡ªç„¶æ¢¯åº¦
   - Saxe et al. (2013) - æ·±åº¦å­¦ä¹ ä¸­çš„ç›¸å˜
   - Sompolinsky et al. (1988) - éšæœºç¥ç»ç½‘ç»œåŠ¨åŠ›å­¦

---

## 6. æ”¹è¿›ä¼˜å…ˆçº§

| ä¼˜å…ˆçº§ | ä»»åŠ¡ | å·¥ä½œé‡ | å½±å“åŠ› |
|--------|------|--------|--------|
| P0 | ç»Ÿä¸€å‚æ•°è¡¨æ–‡æ¡£ | 1å¤© | é«˜ |
| P0 | Î· æ‰«æå®éªŒ | 2å¤© | é«˜ |
| P1 | N_c ç›¸å˜æ‰«æ | 3å¤© | é«˜ |
| P1 | äº‹ä»¶è§¦å‘å®ç° | 2å¤© | ä¸­ |
| P2 | ä»»åŠ¡åˆ‡æ¢å®éªŒ | 3å¤© | ä¸­ |
| P2 | ç†è®ºæ¨å¯¼è¡¥å…… | 5å¤© | ä¸­ |

---

## 7. å¿«é€ŸéªŒè¯å‘½ä»¤

```bash
# 1. æ£€æŸ¥å½“å‰demo
python examples/demo.py

# 2. è¿è¡ŒN=1000ç›¸å˜å®éªŒ
python examples/test_n1000.py

# 3. CLIå¯¹æ¯”å®éªŒ
python -m cicada --compare --N 200 --trials 10
```

---

## 8. ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### ç«‹å³åšï¼ˆä»Šå¤©ï¼‰
1. [ ] åœ¨READMEä¸­æ·»åŠ å®Œæ•´å‚æ•°è¡¨
2. [ ] ç»Ÿä¸€demo.pyå’Œcore.pyçš„å‚æ•°
3. [ ] éªŒè¯Î»_maxèƒ½è¾¾åˆ°2.0+

### æœ¬å‘¨å†…
4. [ ] å®ç°äº‹ä»¶è§¦å‘ç­–ç•¥ï¼ˆCicadaProtocolä¸­æ·»åŠ ï¼‰
5. [ ] è¿è¡ŒN=100~2000ç›¸å˜æ‰«æ
6. [ ] ç”Ÿæˆç›¸å˜å›¾

### é•¿æœŸ
7. [ ] ä»»åŠ¡åˆ‡æ¢å®éªŒ
8. [ ] ç†è®ºæ¨å¯¼è¡¥å……
9. [ ] è®ºæ–‡æŠ•ç¨¿ï¼ˆOSDI/SOSPï¼‰

---

## å…³é”®é—®é¢˜ï¼šä¸ºä»€ä¹ˆéšæœºé‡ç½®æ¯”å³°å€¼ç»§æ‰¿æ›´å¥½ï¼Ÿ

### å‡ ä½•è§£é‡Šï¼ˆéœ€è¦è¡¥å……ï¼‰
1. **æƒé‡ç©ºé—´æœç´¢**ï¼šéšæœºåˆå§‹åŒ– = ä»æ–°åŒºåŸŸå¼€å§‹æœç´¢
2. **é€ƒé€¸å±€éƒ¨æœ€ä¼˜**ï¼šé¿å…å›°åœ¨ä¸è‰¯å¸å¼•å­
3. **å„å‘åŒæ€§**ï¼šéšæœºWå…·æœ‰ç­‰æ–¹æ€§ï¼Œä¸åå‘ç‰¹å®šæ–¹å‘

### å®éªŒéªŒè¯ï¼ˆéœ€è¦åšï¼‰
```python
# ä¼ªä»£ç 
def compare_inheritance_vs_reset():
    results = {}
    
    # æ–¹æ³•1: éšæœºé‡ç½®
    results['reset'] = run_with_random_reset()
    
    # æ–¹æ³•2: å³°å€¼ç»§æ‰¿
    results['inherit'] = run_with_peak_inheritance()
    
    # æ¯”è¾ƒ
    return results
```

---

## å‚è€ƒï¼šç›¸å…³å·¥ä½œ

- **Hebbianå­¦ä¹ ä¸ç¨³å®šæ€§**: Miller & MacKay (1994)
- **è°±åŠå¾„æ§åˆ¶**: Sussillo & Abbott (2009) - FORCE learning
- **ç›¸å˜ç†è®º**: Sompolinsky et al. (1988)
- **Isotropy**: Amari (1977), Yang & Schoenemann (2022)

---

*æœ€åæ›´æ–°: 2026-02-08*
